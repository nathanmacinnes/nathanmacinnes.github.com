<html>
  <head>
    <meta charset="utf-8">
    <title>Password Generator</title>
    <style>
label:not([for=result]) {
  display: inline-block;
  width: 8rem;
}
div {
  margin: 0.2rem auto;
}
form {
  margin-bottom: 1rem;
}
#result {
  width: 11rem;
  text-align: center;
}
    </style>
  </head>
  <body>
    <form id="passwordGenerator">
      <div>
        <label>Site name</label>
        <input id="site-name">
      </div>
      <div>
        <label>Master password</label>
        <input id="master-password" type="password">
      </div>
      <div>
        <input type="submit" value="Generate">
      </div>
    </form>
    <div>
      <label for="result">Password:</label>
      <input id="result">
    </div>
    <p>
      Add <a href="javascript:!function(){function g(a){var b=new TextEncoder(&#34utf-8&#34).encode(a);return crypto.subtle.digest(&#34SHA-256&#34,b).then(function(a){for(var d,e,f,g,b=[],c=new DataView(a),h=0;h<c.byteLength;h+=4)d=c.getUint32(h),e=d.toString(16),f=&#3400000000&#34,g=(f+e).slice(-f.length),b.push(g);return b.join(&#34&#34)})}var b,c,d,e,f,a=window.localStorage.getItem(&#34site_info&#34)||&#34&#34;f=window.open(null,null,&#34menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=400px,height=200px&#34),f.document.write('<html><head><title>Password Generator</title><style>label{min-width:220px;display:inline-block;}input{width:150px;}</style></head><body><form><label for=&#34a&#34>Site-specific name/info:</label><input id=&#34a&#34><br><label for=&#34b&#34>Master password:</label><input type=&#34password&#34 id=&#34b&#34><br><input type=&#34submit&#34 value=&#34Generate&#34></body></html>'),e=f.document.getElementById(&#34a&#34),e.value=a,f.document.querySelector(&#34form&#34).addEventListener(&#34submit&#34,function(a){function h(a){a.target.matches(&#34input[type=password]&#34)&&(a.target.value=b),document.removeEventListener(&#34click&#34,h)}a.preventDefault(),c=f.document.getElementById(&#34a&#34).value,d=e.value,f.close(),&#34&#34!==c&&&#34&#34!==d&&(g(c+d).then(function(a){b=a.substr(0,25)}),document.addEventListener(&#34click&#34,h),window.localStorage.setItem(&#34site_info&#34,d),g(c+d).then(function(a){b=a.substr(0,25)}))})}();">this link</a> to your bookmarks (drag to bookmarks bar). Click it, enter details, then click a password field on the site.
    </p>
    <script>
(function () {
	document.getElementById('passwordGenerator').addEventListener('submit', function (e) {
  	var
    	master = document.getElementById('master-password').value,
      siteName = document.getElementById('site-name').value;

  	e.preventDefault();

    if (master === '' || siteName === '') {
      return;
    }
    sha256(master + siteName).then(function (digest) {
      var hash = digest.substr(0, 25);
      document.getElementById('result').value = hash;
    });
  });

  function sha256(str) {
    var buffer = new TextEncoder("utf-8").encode(str);
    return crypto.subtle.digest("SHA-256", buffer).then(function (buffer) {
      var
      hexCodes = [],
          view = new DataView(buffer),
          value,
          stringValue,
          padding,
          paddedValue;
      for (var i = 0; i < view.byteLength; i += 4) {
        value = view.getUint32(i);
        stringValue = value.toString(16);
        padding = '00000000';
        paddedValue = (padding + stringValue).slice(-padding.length);
        hexCodes.push(paddedValue);
      }
      return hexCodes.join("");
    });
  }
}())
    </script>
  </body>
<html>
